<html>
<head>
	<title>Difoosion Chat</title>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script>
		$(document).ready(function() {
			var sendMessage = function() {
				$.post('SendMessage', { message: $("#message").val() }, function(result) {
					loadMessages();
				});
			};
			var loadMessages = function() {
				$.get('/NewMessages', function(messages) {
					var message = undefined;
					var html = '<ul>';
					jQuery.each(messages, function() {
						html += '<li>' + this.message + '</li>';
					});
					html += '</ul>';
					$('#chat').html(html);
				});
			};
			
			$("#send").click(function() {
				sendMessage();
			});
			
			loadMessages();
		});
	</script>
</head>
<body>
	<h1>Prueba</h1>

	<div id="chat"></div>

	<form action="SendMessage" method="POST">
		<input type="text" id="message" />
		<input type="button" id="send" value="Enviar" />
	</form>
</body>